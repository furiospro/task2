<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Test</title>
	<link rel="stylesheet" href="task2-style.css">
	<script>
		document.addEventListener('DOMContentLoaded',function (event) {
			function mathAction(itemOb) {
				var form = new FormData(itemOb.closest('form'));
				var val_1 = Number(form.get('val-1'));
				var val_2 = Number(form.get('val-2'));
				var id = document.getElementsByTagName('select')[0].selectedOptions[0].id;
				switch (id){
					case 'mul':
						return (val_1 * val_2);
						break;
					case 'div':
						if(val_2 !== 0 ){
							return (val_1 / val_2);
						}else {
							return 'Деление на ноль';
						}
						break;
					case 'sum':
						return (val_1 + val_2);
						break;
					case 'sub':
						return (val_1 - val_2);
						break;
				}
			}

			document.querySelectorAll('input').forEach(function(el){
				el.oninput = function(event){
					event.target.value =   event.target.value.replace(/\D/, '');
				}
			});

			document.getElementById('form').addEventListener('change',function(){
				var i = document.getElementsByTagName('input');
				if(i[0].value !== "" && i[1].value !== "") {
					document.getElementsByTagName('textarea')[0].value = mathAction(this);
				}
			});

			document.getElementById('action').addEventListener('change',function() {
				var i = document.getElementsByTagName('input');
					if (i[0].value !== "" && i[1].value !== "") {
						document.getElementsByTagName('textarea')[0].value = mathAction(this)
					}
				}
			)

		})
	</script>
</head>
<body>
<header></header>
<section>
	<form id="form">
		<div>
			<input type="text" name="val-1" placeholder="Введите число">
			<input type="text" name="val-2" placeholder="Введите число">
			<select id="action">
				<option id="mul">Умножить</option>
				<option id="div">Разделить</option>
				<option id="sum">Сложить</option>
				<option id="sub">Вычесть</option>
			</select>
		</div>
		<textarea></textarea>
	</form>
</section>
<footer>
</footer>
</body>
</html>